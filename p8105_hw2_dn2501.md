Homework \#2
================
David Nemirovsky
9/30/20

``` r
library(tidyverse)
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset:

``` r
trashwheel_df = 
  read_xlsx(
    "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls))
```

Read the precipitation data:

``` r
precip_2018 = 
  read_excel(
    "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "2018 Precipitation",
    skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "2017 Precipitation",
    skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now, combine annual precipitation:

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name)

precip_df = 
  bind_rows(precip_2018, precip_2017)

precip_df =
left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr. Trashwheel trash
collector located in Baltimore, Maryland. Mr. Trashwheel collects trash
as it enters the inner harbor and stores it in a dumpster. This dataset
contains information on year, month, and trash collected, including some
specific types of trash. There are a total of 344 rows in our data set.
Additional data sheets include monthly precipitation data. The total
precipitation in 2018 was 70.33 inches. The median number of sports
balls found in a dumpster in 2017 was 8.

## Problem 2

Read in, clean names, and select the appropriate NYC Transit dataset:

``` r
transit_df = 
  read_csv("./hw2_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  unite(route, route1:route11, sep = ", ", na.rm = TRUE) %>% 
  relocate(station_name, route) %>% 
  arrange(station_name, route) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

This dataset contains information about the entrances of all of the NYC
subway stations. Some key variables are subway lines, routes, types of
entry, presence of MetroCard vending machines, and whether or not that
station entrance is ADA compliant. A variety of functions were used in
order to tidy this data, including `clean_names` from the `janitor`
package to rename the variables in snake-case. The functions`select`,
`unite`, `relocate`, `arrange`, and `mutate` (from the `dplyr` package
in `tidyverse`) were used to choose the appropriate data to study,
collapse the “route\#” variables into a single variable indicating train
routes, re-position and rearrange the columns into a more appealing
order, and convert the “entry” variable from a character to a logical
one, respectively. The dataset is composed of 1868 rows and 9 columns.

#### Questions About Data:

1.  There are 456 distinct stations.
2.  Of these, only 79 stations are ADA compliant.
3.  Approximately 37.7% of station entrances/exits without vending allow
    entrance.

Now, reformat data to create separate variables for “route number” and
“route name”:

``` r
transit_reformed_df = 
  read_csv("./hw2_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(across(route8:route11, as.character)) %>% 
  pivot_longer(route1:route11,
    names_to = "route_number",
    names_prefix = "route",
    values_to = "route_name",
    values_drop_na = TRUE) %>% 
  relocate(station_name, route_number, route_name) %>% 
  arrange(station_name, route_number, route_name) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

There are 56 distinct stations that serve the A train. Of these, only 16
stations are ADA compliant.

## Problem 3

Read in and clean the politician dataset:

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name)

pol_df = 
  read_csv("./hw2_data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(across(year:day, as.integer)) %>% 
  left_join(month_df, by = "month") %>% 
  relocate(year:day, prez_gop, prez_dem) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "president",
    names_prefix = "prez_",
    values_to = "party") %>% 
  mutate(party = na_if(party, 0)) %>% 
  drop_na(party) %>% 
  relocate(year, month_name, president) %>% 
  select(year:rep_dem, -month, -day)
```
